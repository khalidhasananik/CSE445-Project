<!DOCTYPE html>
<html>

<head>
    <title>Save Chart.js as PNG</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <canvas id="rSquareChart" width="800" height="400"></canvas>
    <canvas id="mseChart" width="800" height="400"></canvas>
    <canvas id="rmseChart" width="800" height="400"></canvas>
    <canvas id="cvrmseChart" width="800" height="400"></canvas>
    <canvas id="theilsUChart" width="800" height="400"></canvas>

    <button id="saveAll">Save All Charts</button>

    <script>
        const labels = [
            'Linear Regression',
            'Decision Tree Regressor',
            'Random Forest Regressor',
            'KNN Regressor',
            'XGBoost Regressor',
            'Gradient Boosting Regressor',
            'AdaBoost Regressor'
        ];

        // Function to save a chart as PNG
        function saveChart(chart, fileName) {
            const link = document.createElement('a');
            link.href = chart.toBase64Image();
            link.download = fileName;
            link.click();
        }

        // Create charts
        const rSquareChart = new Chart(document.getElementById('rSquareChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'R Square Value',
                    data: [-0.4789, 0.0418, 0.2087, 0.2042, 0.2193, 0.1524, 0.1929],
                    backgroundColor: 'rgba(255, 99, 132, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'R Square Value Comparison' }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        const mseChart = new Chart(document.getElementById('mseChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Mean Squared Error',
                    data: [12431281.79, 7901367.56, 6525531.51, 6562598.95, 6562049.24, 7124463.50, 6651169.92],
                    backgroundColor: 'rgba(54, 162, 235, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Mean Squared Error (MSE) Comparison' }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        const rmseChart = new Chart(document.getElementById('rmseChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Root Mean Squared Error',
                    data: [3525.80, 2810.94, 2554.51, 2561.76, 2561.65, 2669.17, 2578.99],
                    backgroundColor: 'rgba(255, 206, 86, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Root Mean Squared Error (RMSE) Comparison' }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        const cvrmseChart = new Chart(document.getElementById('cvrmseChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Coefficient of Variation of RMSE',
                    data: [2.4293, 2.0078, 1.8247, 1.8298, 1.7650, 1.8391, 1.8370],
                    backgroundColor: 'rgba(75, 192, 192, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Coefficient of Variation of RMSE (CVRMSE) Comparison' }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        const theilsUChart = new Chart(document.getElementById('theilsUChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: "Theil's U",
                    data: [-10.3126, -18.1793, -5.6150, -11.9612, -8.5239, -6.5008, -2.5150],
                    backgroundColor: 'rgba(153, 102, 255, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: "Theil's U Comparison" }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Save all charts as PNG
        document.getElementById('saveAll').addEventListener('click', () => {
            saveChart(rSquareChart, 'r_square_chart.png');
            saveChart(mseChart, 'mse_chart.png');
            saveChart(rmseChart, 'rmse_chart.png');
            saveChart(cvrmseChart, 'cvrmse_chart.png');
            saveChart(theilsUChart, 'theils_u_chart.png');
        });
    </script>
</body>

</html>